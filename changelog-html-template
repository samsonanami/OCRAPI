yieldUnescaped '<!DOCTYPE html>'
html {
    head {
        meta('charset':'UTF-8')
        title("$title")
        style(type:"text/css"){
            yieldUnescaped '#outlook a {padding: 0;} .ReadMsgBody {width: 100%;} .ExternalClass {width: 100%;} .ExternalClass * {line-height: 100%;}body {margin: 0;padding: 0;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;}table, td {border-collapse: collapse;mso-table-lspace: 0pt;mso-table-rspace: 0pt;}img {border: 0;height: auto;line-height: 100%;outline: none;text-decoration: none;-ms-interpolation-mode: bicubic;}p {display: block;margin: 13px 0;}'
        }
        style(type:"text/css"){
            yieldUnescaped '.outlook-group-fix { width: 100% !important;}'
        }
        style(type:"text/css"){
            yieldUnescaped '@media only screen and (min-width: 480px) {.mj-column-per-100, * [aria-labelledby="mj-column-per-100"] {width: 100% !important;}}'
        }
        style(type:"text/css"){
            yieldUnescaped '@media only screen and (max-width: 480px) {@-ms-viewport {width: 320px;} @viewport { width: 320px; }}'
        }
    }

    body {
        div(){
            yieldUnescaped '<!--[if mso | IE]>'
            table (role:"presentation", border:"0", cellpadding:"0", cellspacing:"0", width:"600",
            align:"center", style:"width:600px;") {
                tr{
                    td(style: "line-height:0px;font-size:0px;mso-line-height-rule:exactly;"){
                       yieldUnescaped '<![endif]-->'
                        div(style : "margin:0px auto;max-width:600px;background:#ffffff;"){
                            table (role:"presentation", border:"0", cellpadding:"0", cellspacing:"0", width:"600",
                                        align:"center", style:"font-size:0px;width:100%;background:#ffffff;") {
                                tbody {
                                    tr{
                                        td(style:"text-align:center;vertical-align:top;direction:ltr;font-size:0px;padding:20px 0px;padding-bottom:20px;padding-top:20px;"){
                                            yieldUnescaped    '<!--[if mso | IE]>'
                                            table (role:"presentation", border:"0", cellpadding:"0", cellspacing:"0", width:"600",
                                                align:"center") {
                                                tr{
                                                    td(style:"vertical-align:top;width:600px;"){
                                                        yieldUnescaped    '<![endif]-->'
                                                        div('aria-labelledby':"mj-column-per-100", class:"mj-column-per-100 outlook-group-fix",
                                                        style:"vertical-align:top;display:inline-block;direction:ltr;font-size:13px;text-align:left;width:100%;"){
                                                            table(role:"presentation", cellpadding:"0", cellspacing:"0",
                                                             style:"vertical-align:top;", width:"100%", border:"0"){
                                                                tbody{
                                                                    tr{
                                                                        td( style:"word-break:break-word;font-size:0px;padding:10px 25px;", align:"center"){
                                                                            div(style:"cursor:auto;color:#000000;font-family:Ubuntu, Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif;font-size:40px;line-height:22px;text-align:center;"){
                                                                                span("$title")
                                                                            }
                                                                        }
                                                                    }
                                                                    tr{
                                                                        td(style:"word-break:break-word;font-size:0px;padding:10px 25px;"){
                                                                            p(style:"font-size:1px;margin:0px auto;border-top:4px solid #F45E43;width:100%;"){

                                                                            }
                                                                            yieldUnescaped '<!--[if mso | IE]>'
                                                                            table(role:"presentation", align:"center", border:"0", cellpadding:"0",
                                                                                    style:"font-size:1px;margin:0px auto;border-top:4px solid #F45E43;width:100%;",
                                                                                     width:"600"){
                                                                                tr{
                                                                                    td(style:"height:0;line-height:0;"){

                                                                                    }
                                                                                }
                                                                            }
                                                                            yieldUnescaped '<![endif]-->'
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                      yieldUnescaped  '<!--[if mso | IE]>'
                                                    }
                                                }
                                            }
                                          yieldUnescaped  '<![endif]-->'
                                        }
                                    }
                                }
                            }
                        }
                      yieldUnescaped  '<!--[if mso | IE]>'
                    }
                }
            }
          yieldUnescaped  '<![endif]-->'
        }

        div(){
            yieldUnescaped '<!--[if mso | IE]>'
            table (role:"presentation", border:"0", cellpadding:"0", cellspacing:"0", width:"600",
            align:"center", style:"width:600px;") {
                tr{
                    td(style: "line-height:0px;font-size:0px;mso-line-height-rule:exactly;"){
                       yieldUnescaped '<![endif]-->'
                        div(style : "margin:0px auto;max-width:600px;background:#ffffff;"){
                            table (role:"presentation", border:"0", cellpadding:"0", cellspacing:"0", width:"600",
                                        align:"center", style:"font-size:0px;width:100%;background:#ffffff;") {
                                tbody {
                                    tr{
                                        td(style:"text-align:center;vertical-align:top;direction:ltr;font-size:0px;padding:20px 0px;padding-bottom:20px;padding-top:20px;"){
                                            yieldUnescaped    '<!--[if mso | IE]>'
                                            table (role:"presentation", border:"0", cellpadding:"0", cellspacing:"0", width:"600",
                                                align:"center") {
                                                tr{
                                                    td(style:"vertical-align:top;width:600px;"){
                                                        yieldUnescaped    '<![endif]-->'
                                                        div('aria-labelledby':"mj-column-per-100", class:"mj-column-per-100 outlook-group-fix",
                                                        style:"vertical-align:top;display:inline-block;direction:ltr;font-size:13px;text-align:left;width:100%;"){
                                                            headingsToCommitMap.each { k, v ->
                                                                table(role:"presentation", cellpadding:"0", cellspacing:"0",
                                                                    style:"vertical-align:top;", width:"100%", border:"0"){
                                                                    tbody{
                                                                        tr{
                                                                            td(style:"word-break:break-word;font-size:0px;padding:10px 25px;padding-top:0px;padding-bottom:0px;padding-right:25px;padding-left:25px;",
                                                                               align:"left"){
                                                                                div(style:"cursor:auto;color:#000000;font-family:Ubuntu, Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif;font-size:13px;line-height:22px;text-align:left;"){
                                                                                    p{
                                                                                        span(style:"color: rgb(106, 138, 162);font-weight: bold;font-size: 16px;"){
                                                                                          fragment "span(title)", title: k
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                        tr{
                                                                            td(style:"word-break:break-word;font-size:0px;padding:10px 25px;padding-top:0px;padding-bottom:0px;padding-right:25px;padding-left:25px;",
                                                                                align:"justify"){
                                                                                    div(style:"cursor:auto;color:#000000;font-family:Ubuntu, Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif;font-size:13px;line-height:22px;text-align:justify;"){
                                                                                        span(){
                                                                                            v.each {
                                                                                                if(it.matches("\\(([0-9]{4})-([0-9]{2})-([0-9]{2}) ([0-9]{2}):([0-9]{2}):([0-9]{2}) .*")){
                                                                                                   fragment "h4(commit)", commit: it
                                                                                                   yieldUnescaped '<p>'
                                                                                                }else if (it.matches(".*(.*)(.*@.*)")){
                                                                                                    yieldUnescaped '</br>'
                                                                                                    fragment "span(commit)", commit: it
                                                                                                }else{
                                                                                                    fragment "span(commit)", commit: it
                                                                                                }
                                                                                            }
                                                                                            yieldUnescaped '</p>'
                                                                                        }
                                                                                    }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                      yieldUnescaped  '<!--[if mso | IE]>'
                                                    }
                                                }
                                            }
                                          yieldUnescaped  '<![endif]-->'
                                        }
                                    }
                                }
                            }
                        }
                      yieldUnescaped  '<!--[if mso | IE]>'
                    }
                }
            }
          yieldUnescaped  '<![endif]-->'
        }

    }
}